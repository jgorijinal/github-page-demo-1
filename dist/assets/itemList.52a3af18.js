import{N as q}from"./navBar.0c4a50a1.js";import{f as W,g as Y,o as Z,t as P,a as G}from"./items.67e7e183.js";import{m as H}from"./overlay.431c3947.js";import{y as J,d as I,j as k,a9 as K,f as a,S as Q,O as S,C as X,aa as A,N as ee,Z as te,_ as U,r as V,s as ae,o as D,a as h,b as n,t as g,u as m,k as se,F,q as L,n as ne,g as oe,m as le,p as ue,e as re,w as b}from"./index.1104e249.js";import{g as $,a as z,b as R,d as ie}from"./dateCalc.fa1d73b3.js";import"./index.9c67102f.js";const[ce,C,O]=J("pagination"),B=(s,r,l)=>({number:s,text:r,active:l}),de={mode:Q("multi"),prevText:String,nextText:String,pageCount:S(0),modelValue:X(0),totalItems:S(0),showPageSize:S(5),itemsPerPage:S(10),forceEllipses:Boolean};var me=I({name:ce,props:de,emits:["change","update:modelValue"],setup(s,{emit:r,slots:l}){const u=k(()=>{const{pageCount:e,totalItems:o,itemsPerPage:t}=s,i=+e||Math.ceil(+o/+t);return Math.max(1,i)}),x=k(()=>{const e=[],o=u.value,t=+s.showPageSize,{modelValue:i,forceEllipses:w}=s;let y=1,f=o;const M=t<o;M&&(y=Math.max(i-Math.floor(t/2),1),f=y+t-1,f>o&&(f=o,y=f-t+1));for(let _=y;_<=f;_++){const j=B(_,_,_===i);e.push(j)}if(M&&t>0&&w){if(y>1){const _=B(y-1,"...");e.unshift(_)}if(f<o){const _=B(f+1,"...");e.push(_)}}return e}),c=(e,o)=>{e=ee(e,1,u.value),s.modelValue!==e&&(r("update:modelValue",e),o&&r("change",e))};K(()=>c(s.modelValue));const d=()=>a("li",{class:C("page-desc")},[l.pageDesc?l.pageDesc():`${s.modelValue}/${u.value}`]),v=()=>{const{mode:e,modelValue:o}=s,t=l["prev-text"],i=o===1;return a("li",{class:[C("item",{disabled:i,border:e==="simple",prev:!0}),A]},[a("button",{type:"button",disabled:i,onClick:()=>c(o-1,!0)},[t?t():s.prevText||O("prev")])])},N=()=>{const{mode:e,modelValue:o}=s,t=l["next-text"],i=o===u.value;return a("li",{class:[C("item",{disabled:i,border:e==="simple",next:!0}),A]},[a("button",{type:"button",disabled:i,onClick:()=>c(o+1,!0)},[t?t():s.nextText||O("next")])])},p=()=>x.value.map(e=>a("li",{class:[C("item",{active:e.active,page:!0}),A]},[a("button",{type:"button","aria-current":e.active||void 0,onClick:()=>c(e.number,!0)},[l.page?l.page(e):e.text])]));return()=>a("nav",{role:"navigation",class:C()},[a("ul",{class:C("items")},[v(),s.mode==="simple"?d():p(),N()])])}});const pe=te(me);const T=s=>(ue("data-v-f90e6442"),s=s(),re(),s),_e={class:"item-summary"},ve={class:"item-summary-total"},ge=T(()=>n("span",null,"\u6536\u5165",-1)),fe=T(()=>n("span",null,"\u652F\u51FA",-1)),De=T(()=>n("span",null,"\u51C0\u6536\u5165",-1)),he={key:0,class:"tips"},xe={class:"item-summary-list"},ye={class:"sign"},be={class:"text"},Ce={class:"tagAndAmount"},Ve={class:"tag-wrapper"},ke={class:"time"},Pe=I({__name:"itemSummary",props:{startDate:null,endDate:null},setup(s){const r=s,l=V(1),u=V([]),x=V(1),c=async()=>{const p=le.loading({duration:0,message:"\u52A0\u8F7D\u4E2D...",forbidClick:!0});try{const e=await Y({happen_before:r.endDate,happen_after:r.startDate,page:l.value}),{resources:o,pager:t}=e;u.value=o,t.count===t.per_page&&(x.value+=1)}catch(e){console.log(e)}p.clear()};c(),ae(()=>r.endDate,()=>{c()});const d=k(()=>{let p=0;return u.value.forEach(e=>{e.kind=="expenses"&&(p+=e.amount)}),p}),v=k(()=>{let p=0;return u.value.forEach(e=>{e.kind=="income"&&(p+=e.amount)}),p}),N=k(()=>v.value-d.value);return(p,e)=>{const o=pe;return D(),h("div",_e,[n("ul",ve,[n("li",null,[ge,n("span",null,g(m(v)||""),1)]),n("li",null,[fe,n("span",null,g(m(d)||""),1)]),n("li",null,[De,n("span",null,g(m(N)||""),1)])]),u.value.length===0?(D(),h("div",he,"\u76EE\u524D\u8FD8\u6CA1\u6709\u8BB0\u5F55")):se("",!0),n("ul",xe,[(D(!0),h(F,null,L(u.value,t=>(D(),h("li",{class:"item-summary-list-item",key:t.id},[n("div",ye,[n("span",null,g(t.tags[0].sign),1)]),n("div",be,[n("div",Ce,[n("div",Ve,[(D(!0),h(F,null,L(t.tags,(i,w)=>(D(),h("span",{class:"tag",key:w},g(i.name),1))),128))]),n("span",{class:ne(["amount",{isExpenses:t.kind==="expenses"}])},g(t.amount)+" \u5143",3)]),n("div",ke,[n("span",null,g(t.kind==="income"?"\u6536\u5165":"\u652F\u51FA"),1),oe(" "+g(m(W)(t.tags[0].updated_at)),1)])])]))),128))]),a(o,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),"page-count":x.value,mode:"simple",onChange:c},null,8,["modelValue","page-count"])])}}});var E=U(Pe,[["__scopeId","data-v-f90e6442"]]);const Se=["src"],Ee=I({__name:"itemList",setup(s){const r=V(!1),l=V("\u672C\u6708"),u=V({startDate:"",endDate:""}),x=c=>{u.value=c,console.log(u.value)};return(c,d)=>(D(),h(F,null,[a(q,{leftText:"\u8D26\u5355\u5217\u8868",onClickLeft:d[0]||(d[0]=v=>r.value=!0)},{leftIcon:b(()=>[n("img",{src:m(H),alt:"",class:"left-icon-img"},null,8,Se)]),_:1}),a(Z,{overlayVisible:r.value,onCloseOverlay:d[1]||(d[1]=v=>r.value=!1)},null,8,["overlayVisible"]),a(G,{active:l.value,"onUpdate:active":d[2]||(d[2]=v=>l.value=v)},{default:b(()=>[a(P,{name:"\u672C\u6708"},{default:b(()=>[a(E,{startDate:m($)().startDate,endDate:m($)().endDate},null,8,["startDate","endDate"])]),_:1}),a(P,{name:"\u4E0A\u6708"},{default:b(()=>[a(E,{startDate:m(z)().startDate,endDate:m(z)().endDate},null,8,["startDate","endDate"])]),_:1}),a(P,{name:"\u4ECA\u5E74"},{default:b(()=>[a(E,{startDate:m(R)().startDate,endDate:m(R)().endDate},null,8,["startDate","endDate"])]),_:1}),a(P,{name:"\u81EA\u5B9A\u4E49\u65F6\u95F4"},{default:b(()=>[a(ie,{onDateChanged:x}),a(E,{startDate:u.value.startDate,endDate:u.value.endDate},null,8,["startDate","endDate"])]),_:1})]),_:1},8,["active"])],64))}});var Te=U(Ee,[["__scopeId","data-v-1d8c9fd9"]]);export{Te as default};
