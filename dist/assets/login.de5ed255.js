import{y as D,d as E,U as z,J as N,f as c,L as M,Q as y,M as Z,al as G,Z as k,F as q,a1 as L,ax as U,a3 as F,ay as j,j as J,s as K,O as Q,S as W,_ as Y,G as X,r as A,i as ee,o as V,a as te,w as g,b,u as $,az as ne,c as x,k as T,g as R,aA as se,h as ae,as as le,m as oe,B as ue,p as ie,e as re}from"./index.1104e249.js";import{F as ce}from"./index.9c67102f.js";import{f as de}from"./fanhui.3f81e613.js";import{N as me}from"./navBar.0c4a50a1.js";const[fe,_e]=D("form"),pe={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:M,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:y,showErrorMessage:y,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var ve=E({name:fe,props:pe,emits:["submit","failed"],setup(e,{emit:s,slots:l}){const{children:a,linkChildren:u}=z(G),o=t=>t?a.filter(n=>t.includes(n.name)):a,f=t=>new Promise((n,i)=>{const _=[];o(t).reduce((O,H)=>O.then(()=>{if(!_.length)return H.validate().then(P=>{P&&_.push(P)})}),Promise.resolve()).then(()=>{_.length?i(_):n()})}),r=t=>new Promise((n,i)=>{const _=o(t);Promise.all(_.map(m=>m.validate())).then(m=>{m=m.filter(Boolean),m.length?i(m):n()})}),p=t=>{const n=a.find(i=>i.name===t);return n?new Promise((i,_)=>{n.validate().then(m=>{m?_(m):i()})}):Promise.reject()},v=t=>typeof t=="string"?p(t):e.validateFirst?f(t):r(t),B=t=>{typeof t=="string"&&(t=[t]),o(t).forEach(i=>{i.resetValidation()})},d=()=>a.reduce((t,n)=>(t[n.name]=n.getValidationStatus(),t),{}),h=(t,n)=>{a.some(i=>i.name===t?(i.$el.scrollIntoView(n),!0):!1)},C=()=>a.reduce((t,n)=>(t[n.name]=n.formValue.value,t),{}),S=()=>{const t=C();v().then(()=>s("submit",t)).catch(n=>{s("failed",{values:t,errors:n}),e.scrollToError&&n[0].name&&h(n[0].name)})},w=t=>{Z(t),S()};return u({props:e}),N({submit:S,validate:v,getValues:C,scrollToField:h,resetValidation:B,getValidationStatus:d}),()=>{var t;return c("form",{class:_e(),onSubmit:w},[(t=l.default)==null?void 0:t.call(l)])}}});const ge=k(ve),[Be,I]=D("cell-group"),he={title:String,inset:Boolean,border:y};var Se=E({name:Be,inheritAttrs:!1,props:he,setup(e,{slots:s,attrs:l}){const a=()=>{var o;return c("div",L({class:[I({inset:e.inset}),{[U]:e.border&&!e.inset}]},l),[(o=s.default)==null?void 0:o.call(s)])},u=()=>c("div",{class:I("title",{inset:e.inset})},[s.title?s.title():e.title]);return()=>e.title||s.title?c(q,null,[u(),a()]):a()}});const Fe=k(Se);function be(e,s){const{days:l}=s;let{hours:a,minutes:u,seconds:o,milliseconds:f}=s;if(e.includes("DD")?e=e.replace("DD",F(l)):a+=l*24,e.includes("HH")?e=e.replace("HH",F(a)):u+=a*60,e.includes("mm")?e=e.replace("mm",F(u)):o+=u*60,e.includes("ss")?e=e.replace("ss",F(o)):f+=o*1e3,e.includes("S")){const r=F(f,3);e.includes("SSS")?e=e.replace("SSS",r):e.includes("SS")?e=e.replace("SS",r.slice(0,2)):e=e.replace("S",r.charAt(0))}return e}const[Ce,Ae]=D("count-down"),ye={time:Q(0),format:W("HH:mm:ss"),autoStart:y,millisecond:Boolean};var Ee=E({name:Ce,props:ye,emits:["change","finish"],setup(e,{emit:s,slots:l}){const{start:a,pause:u,reset:o,current:f}=j({time:+e.time,millisecond:e.millisecond,onChange:v=>s("change",v),onFinish:()=>s("finish")}),r=J(()=>be(e.format,f.value)),p=()=>{o(+e.time),e.autoStart&&a()};return K(()=>e.time,p,{immediate:!0}),N({start:a,pause:u,reset:p}),()=>c("div",{role:"timer",class:Ae()},[l.default?l.default(f.value):r.value])}});const we=k(Ee);const Ve=e=>(ie("data-v-87dd709c"),e=e(),re(),e),De={class:"eren-login"},ke=["src"],Pe={class:"eren-logo"},$e={class:"eren-logo-wrapper"},xe=["src"],Te=Ve(()=>b("span",null,"\u65E5\u5E38\u8BB0\u8D26",-1)),Re=E({__name:"login",setup(e){const s=X({email:"",code:""}),l=A(!1),a={email:[{required:!0,message:"\u8BF7\u586B\u5199\u90AE\u7BB1"},{pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"}],code:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801"}]},u=A(null),o=A(null),f=()=>{u.value.validate("email").then(async()=>{l.value=!0;const B=await se({email:s.email});console.log("\u53D1\u9001\u9A8C\u8BC1\u7801\u6210\u529F"),console.log(B)}).catch(()=>{console.log("\u6821\u9A8C\u4E0D\u901A\u8FC7")}),o.value.focus()};ae(),le();const r=A(!1),p=ee(),v=async()=>{oe.loading({duration:0,message:"\u767B\u5F55\u4E2D...",forbidClick:!0}),r.value=!0,p.loginAction(s),r.value=!1};return(B,d)=>{const h=ce,C=we,S=ue,w=Fe,t=ge;return V(),te("div",De,[c(me,{title:"\u767B\u5F55",onClickLeft:d[0]||(d[0]=n=>B.$router.back())},{leftIcon:g(()=>[b("img",{src:$(de),alt:"",class:"fanhui"},null,8,ke)]),_:1}),b("div",Pe,[b("div",$e,[b("img",{src:$(ne),alt:""},null,8,xe),Te])]),c(t,{onSubmit:v,ref_key:"formRef",ref:u},{default:g(()=>[c(w,{inset:""},{default:g(()=>[c(h,{modelValue:s.email,"onUpdate:modelValue":d[1]||(d[1]=n=>s.email=n),name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:a.email},null,8,["modelValue","rules"]),c(h,{modelValue:s.code,"onUpdate:modelValue":d[3]||(d[3]=n=>s.code=n),center:"",clearable:"",name:"code",label:"\u90AE\u7BB1\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u6536\u5230\u7684\u9A8C\u8BC1\u7801",rules:a.code,ref_key:"codeInputRef",ref:o},{button:g(()=>[l.value?(V(),x(C,{key:0,time:60*1e3,format:"ss \u79D2",onFinish:d[2]||(d[2]=n=>l.value=!1)})):T("",!0),l.value?T("",!0):(V(),x(S,{key:1,size:"small",type:"primary",color:"#3465e0",onClick:f},{default:g(()=>[R("\u53D1\u9001\u9A8C\u8BC1\u7801")]),_:1}))]),_:1},8,["modelValue","rules"]),c(S,{block:"",type:"primary",color:"#3465e0",round:"",style:{margin:"30px 0"},"native-type":"submit",loading:r.value},{default:g(()=>[R("\u767B\u5F55")]),_:1},8,["loading"])]),_:1})]),_:1},512)])}}});var ze=Y(Re,[["__scopeId","data-v-87dd709c"]]);export{ze as default};
