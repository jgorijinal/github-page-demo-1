import{y as k,d as E,S as z,I as N,f as c,K as M,O as y,L as Z,ak as q,Y as D,F as G,a0 as L,aw as j,a2 as F,ax as K,j as U,s as Y,N as W,R as J,_ as Q,E as X,r as A,i as ee,o as V,a as te,w as g,b,u as $,ay as ne,c as x,k as R,g as T,az as se,h as ae,ar as le,m as oe,aA as ue,p as ie,e as re}from"./index.965bee98.js";import{F as ce}from"./index.4aa0e46a.js";import{f as de}from"./fanhui.3f81e613.js";import{N as me}from"./navBar.24a131c8.js";const[fe,_e]=k("form"),pe={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:M,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:y,showErrorMessage:y,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var ve=E({name:fe,props:pe,emits:["submit","failed"],setup(e,{emit:s,slots:l}){const{children:a,linkChildren:u}=z(q),o=t=>t?a.filter(n=>t.includes(n.name)):a,f=t=>new Promise((n,i)=>{const _=[];o(t).reduce((O,H)=>O.then(()=>{if(!_.length)return H.validate().then(P=>{P&&_.push(P)})}),Promise.resolve()).then(()=>{_.length?i(_):n()})}),r=t=>new Promise((n,i)=>{const _=o(t);Promise.all(_.map(m=>m.validate())).then(m=>{m=m.filter(Boolean),m.length?i(m):n()})}),p=t=>{const n=a.find(i=>i.name===t);return n?new Promise((i,_)=>{n.validate().then(m=>{m?_(m):i()})}):Promise.reject()},v=t=>typeof t=="string"?p(t):e.validateFirst?f(t):r(t),B=t=>{typeof t=="string"&&(t=[t]),o(t).forEach(i=>{i.resetValidation()})},d=()=>a.reduce((t,n)=>(t[n.name]=n.getValidationStatus(),t),{}),h=(t,n)=>{a.some(i=>i.name===t?(i.$el.scrollIntoView(n),!0):!1)},C=()=>a.reduce((t,n)=>(t[n.name]=n.formValue.value,t),{}),S=()=>{const t=C();v().then(()=>s("submit",t)).catch(n=>{s("failed",{values:t,errors:n}),e.scrollToError&&n[0].name&&h(n[0].name)})},w=t=>{Z(t),S()};return u({props:e}),N({submit:S,validate:v,getValues:C,scrollToField:h,resetValidation:B,getValidationStatus:d}),()=>{var t;return c("form",{class:_e(),onSubmit:w},[(t=l.default)==null?void 0:t.call(l)])}}});const ge=D(ve),[Be,I]=k("cell-group"),he={title:String,inset:Boolean,border:y};var Se=E({name:Be,inheritAttrs:!1,props:he,setup(e,{slots:s,attrs:l}){const a=()=>{var o;return c("div",L({class:[I({inset:e.inset}),{[j]:e.border&&!e.inset}]},l),[(o=s.default)==null?void 0:o.call(s)])},u=()=>c("div",{class:I("title",{inset:e.inset})},[s.title?s.title():e.title]);return()=>e.title||s.title?c(G,null,[u(),a()]):a()}});const Fe=D(Se);function be(e,s){const{days:l}=s;let{hours:a,minutes:u,seconds:o,milliseconds:f}=s;if(e.includes("DD")?e=e.replace("DD",F(l)):a+=l*24,e.includes("HH")?e=e.replace("HH",F(a)):u+=a*60,e.includes("mm")?e=e.replace("mm",F(u)):o+=u*60,e.includes("ss")?e=e.replace("ss",F(o)):f+=o*1e3,e.includes("S")){const r=F(f,3);e.includes("SSS")?e=e.replace("SSS",r):e.includes("SS")?e=e.replace("SS",r.slice(0,2)):e=e.replace("S",r.charAt(0))}return e}const[Ce,Ae]=k("count-down"),ye={time:W(0),format:J("HH:mm:ss"),autoStart:y,millisecond:Boolean};var Ee=E({name:Ce,props:ye,emits:["change","finish"],setup(e,{emit:s,slots:l}){const{start:a,pause:u,reset:o,current:f}=K({time:+e.time,millisecond:e.millisecond,onChange:v=>s("change",v),onFinish:()=>s("finish")}),r=U(()=>be(e.format,f.value)),p=()=>{o(+e.time),e.autoStart&&a()};return Y(()=>e.time,p,{immediate:!0}),N({start:a,pause:u,reset:p}),()=>c("div",{role:"timer",class:Ae()},[l.default?l.default(f.value):r.value])}});const we=D(Ee);const Ve=e=>(ie("data-v-87dd709c"),e=e(),re(),e),ke={class:"eren-login"},De=["src"],Pe={class:"eren-logo"},$e={class:"eren-logo-wrapper"},xe=["src"],Re=Ve(()=>b("span",null,"\u65E5\u5E38\u8BB0\u8D26",-1)),Te=E({__name:"login",setup(e){const s=X({email:"",code:""}),l=A(!1),a={email:[{required:!0,message:"\u8BF7\u586B\u5199\u90AE\u7BB1"},{pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"}],code:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801"}]},u=A(null),o=A(null),f=()=>{u.value.validate("email").then(async()=>{l.value=!0;const B=await se({email:s.email});console.log("\u53D1\u9001\u9A8C\u8BC1\u7801\u6210\u529F"),console.log(B)}).catch(()=>{console.log("\u6821\u9A8C\u4E0D\u901A\u8FC7")}),o.value.focus()};ae(),le();const r=A(!1),p=ee(),v=async()=>{oe.loading({duration:0,message:"\u767B\u5F55\u4E2D...",forbidClick:!0}),r.value=!0,p.loginAction(s),r.value=!1};return(B,d)=>{const h=ce,C=we,S=ue,w=Fe,t=ge;return V(),te("div",ke,[c(me,{title:"\u767B\u5F55",onClickLeft:d[0]||(d[0]=n=>B.$router.back())},{leftIcon:g(()=>[b("img",{src:$(de),alt:"",class:"fanhui"},null,8,De)]),_:1}),b("div",Pe,[b("div",$e,[b("img",{src:$(ne),alt:""},null,8,xe),Re])]),c(t,{onSubmit:v,ref_key:"formRef",ref:u},{default:g(()=>[c(w,{inset:""},{default:g(()=>[c(h,{modelValue:s.email,"onUpdate:modelValue":d[1]||(d[1]=n=>s.email=n),name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:a.email},null,8,["modelValue","rules"]),c(h,{modelValue:s.code,"onUpdate:modelValue":d[3]||(d[3]=n=>s.code=n),center:"",clearable:"",name:"code",label:"\u90AE\u7BB1\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u6536\u5230\u7684\u9A8C\u8BC1\u7801",rules:a.code,ref_key:"codeInputRef",ref:o},{button:g(()=>[l.value?(V(),x(C,{key:0,time:60*1e3,format:"ss \u79D2",onFinish:d[2]||(d[2]=n=>l.value=!1)})):R("",!0),l.value?R("",!0):(V(),x(S,{key:1,size:"small",type:"primary",color:"#3465e0",onClick:f},{default:g(()=>[T("\u53D1\u9001\u9A8C\u8BC1\u7801")]),_:1}))]),_:1},8,["modelValue","rules"]),c(S,{block:"",type:"primary",color:"#3465e0",round:"",style:{margin:"30px 0"},"native-type":"submit",loading:r.value},{default:g(()=>[T("\u767B\u5F55")]),_:1},8,["loading"])]),_:1})]),_:1},512)])}}});var ze=Q(Te,[["__scopeId","data-v-87dd709c"]]);export{ze as default};
